<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns='http://www.liquibase.org/xml/ns/dbchangelog/1.9' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.liquibase.org/xml/ns/dbchangelog/1.9 http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd'>
  <changeSet author='David' id='5850-1-1' failOnError='true'>
    <comment>add new columns to CA_OBJECT_CODE_T and CA_OBJECT_CODE_V</comment>
    <addColumn tableName='CA_OBJECT_CODE_T'>
      <column name='RSCH_BDGT_CTGRY_CD' type='VARCHAR2(3)' />
    </addColumn>
    <modifySql dbms='mysql'>
      <replace replace='VARCHAR2' with='VARCHAR' />
    </modifySql>
    <modifySql dbms='mysql'>
      <replace replace='varchar2' with='VARCHAR' />
    </modifySql>
    <modifySql dbms='mysql'>
      <replace replace='NUMBER' with='DECIMAL' />
    </modifySql>
  </changeSet>
  <changeSet author='David' id='5850-1-2' failOnError='true'>
    <comment>add new columns to CA_OBJECT_CODE_T and CA_OBJECT_CODE_V</comment>
    <addColumn tableName='CA_OBJECT_CODE_T'>
      <column name='RSCH_OBJ_CD_DESC' type='VARCHAR2(200)' />
    </addColumn>
    <modifySql dbms='mysql'>
      <replace replace='VARCHAR2' with='VARCHAR' />
    </modifySql>
    <modifySql dbms='mysql'>
      <replace replace='varchar2' with='VARCHAR' />
    </modifySql>
    <modifySql dbms='mysql'>
      <replace replace='NUMBER' with='DECIMAL' />
    </modifySql>
  </changeSet>
  <changeSet author='David' id='5850-1-3' failOnError='true'>
    <comment>add new columns to CA_OBJECT_CODE_T and CA_OBJECT_CODE_V</comment>
    <addColumn tableName='CA_OBJECT_CODE_T'>
      <column name='RSCH_ON_CMP_IND' type='VARCHAR2(1)' />
    </addColumn>
    <modifySql dbms='mysql'>
      <replace replace='VARCHAR2' with='VARCHAR' />
    </modifySql>
    <modifySql dbms='mysql'>
      <replace replace='varchar2' with='VARCHAR' />
    </modifySql>
    <modifySql dbms='mysql'>
      <replace replace='NUMBER' with='DECIMAL' />
    </modifySql>
  </changeSet>
  <changeSet author='David' id='5850-1-4' failOnError='true' dbms='oracle'>
    <comment>add new columns to CA_OBJECT_CODE_T and CA_OBJECT_CODE_V</comment>
    <createView viewName='CA_OBJECT_CODE_V'>
      CREATE OR REPLACE VIEW CA_OBJECT_CODE_V
AS
(
SELECT
C.UNIV_FISCAL_YR,
FIN_COA_CD,
FIN_OBJECT_CD,
FIN_OBJ_CD_NM,
FIN_OBJ_CD_SHRT_NM,
FIN_OBJ_LEVEL_CD,
RPTS_TO_FIN_COA_CD,
RPTS_TO_FIN_OBJ_CD ,
FIN_OBJ_TYP_CD,
FIN_OBJ_SUB_TYP_CD,
HIST_FIN_OBJECT_CD,
FIN_OBJ_ACTIVE_CD,
FOBJ_BDGT_AGGR_CD,
FOBJ_MNXFR_ELIM_CD,
FIN_FED_FUNDED_CD,
NXT_YR_FIN_OBJ_CD,
RSCH_BDGT_CTGRY_CD,
RSCH_OBJ_CD_DESC,
RSCH_ON_CMP_IND
FROM CA_OBJECT_CODE_T C, SH_UNIV_DATE_T S
WHERE C.UNIV_FISCAL_YR = S.UNIV_FISCAL_YR AND UNIV_DT = TRUNC(SYSDATE)
);
    </createView>
  </changeSet>

<changeSet author='David' id='5850-1-5' failOnError='true' dbms='mysql'>
    <comment>add new columns to CA_OBJECT_CODE_T and CA_OBJECT_CODE_V</comment>
    <createView viewName='CA_OBJECT_CODE_V'>
CREATE OR REPLACE VIEW CA_OBJECT_CODE_V
AS
(
SELECT
        C.UNIV_FISCAL_YR,
        FIN_COA_CD,
        FIN_OBJECT_CD,
        FIN_OBJ_CD_NM,
        FIN_OBJ_CD_SHRT_NM,
        FIN_OBJ_LEVEL_CD,
        RPTS_TO_FIN_COA_CD,
        RPTS_TO_FIN_OBJ_CD ,
        FIN_OBJ_TYP_CD,
        FIN_OBJ_SUB_TYP_CD,
        HIST_FIN_OBJECT_CD,
        FIN_OBJ_ACTIVE_CD,
        FOBJ_BDGT_AGGR_CD,
        FOBJ_MNXFR_ELIM_CD,
        FIN_FED_FUNDED_CD,
        NXT_YR_FIN_OBJ_CD,
        RSCH_BDGT_CTGRY_CD,
        RSCH_OBJ_CD_DESC,
        RSCH_ON_CMP_IND
        
FROM CA_OBJECT_CODE_T AS C, SH_UNIV_DATE_T AS S
WHERE C.UNIV_FISCAL_YR = S.UNIV_FISCAL_YR AND UNIV_DT = DATE(CURRENT_DATE));
   </createView>
  </changeSet>


</databaseChangeLog>