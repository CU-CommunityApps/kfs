<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns='http://www.liquibase.org/xml/ns/dbchangelog/1.9' xmlns:xsi='http://www.w3.org/2001/XMLSchema
-instance' xsi:schemaLocation='http://www.liquibase.org/xml/ns/dbchangelog/1.9 http://www.liquibase.org/xml/ns/dbchang
elog/dbchangelog-1.9.xsd'>
  <changeSet author='kfs50' id='KFS_50_CreateTable_AST_PMT_DST_CD' failOnError='true'>
    <comment>KFSMI-KFSMI-5998 </comment>
    <createTable tableName='CM_AST_PMT_DST_CD_T'>
      <column name='AST_PMT_DST_CD' type='VARCHAR2(1)'>
      <constraints  primaryKey='true' nullable='false'/>
      </column>
      <column name='OBJ_ID' type='VARCHAR2(36)'>
      <constraints nullable='false' />
      </column>
      <column name='ver_nbr' type='NUMBER(8)'>
      <constraints nullable='false' />
      </column>
      <column name='AST_PMT_DST_NM' type='VARCHAR2(40)'>
      <constraints nullable='false' />
      </column>
      <column name='AST_PMT_DST_COL_NM' type='VARCHAR2(40)'>
      <constraints nullable='false' />
      </column>
      <column name='AST_PMT_DST_EDT' type='VARCHAR2(1)' >
      <constraints nullable='false' />
      </column>
      <column name='ROW_ACTV_IND' type='VARCHAR2(1)' >
      <constraints nullable='false' />
      </column>
    </createTable>

   <addColumn tableName='cm_ast_pmt_ast_dtl_t'>
      <column name='CPTLAST_ALLOC_AMT' type='NUMBER(19,2)' defaultValueNumeric='0'>
        <constraints nullable='false' />
	<column name='CPTLAST_ALLOC_VAL' type='NUMBER(19,2)'>
        <constraints nullable='false' />
      </column>
	<column name='CPTLAST_ALLOC_VAL_PCT' type='NUMBER(19,6)'>
      </column>

    </addColumn>

    <addColumn tableName='cm_ast_pmt_doc_t'>
      <column name='AST_PMT_DST_CD' type='VARCHAR2(2)' defaultValue='2'>
        <constraints nullable='false' />
      </column>
    </addColumn>

Ï <comment>KFSMI-KFSMI-6889 Extend the column size for CPTLAST_DESC field </comment>
    <modifyColumn tableName='CB_PRTG_T'>
      <column name='CPTLAST_TOPS_DESC' type='VARCHAR2(4000))' />
    </modifyColumn>
     <modifyColumn tableName='CM_CPTLAST_T'>
      <column name='CPTLAST_DESC' type='VARCHAR2(4000))' />
    </modifyColumn>
     <modifyColumn tableName='CM_AST_RETIRE_DOC_T'>
      <column name='MERGED_TGT_CPTLAST_DESC' type='VARCHAR2(4000))' />
    </modifyColumn>
     <modifyColumn tableName='CM_CPTLAST_DOC_T'>
      <column name='CPTLAST_DESC' type='VARCHAR2(4000))' />
    </modifyColumn>
     <modifyColumn tableName='CM_CPTLAST_DTL_T'>
      <column name='CPTLAST_DESC' type='VARCHAR2(4000))' />
    </modifyColumn>
     <modifyColumn tableName='FP_CPTL_AST_INFO_T'>
      <column name='CPTLAST_DESC' type='VARCHAR2(4000))' />
    </modifyColumn>
    
    <comment>KFSMI-KFSMI-7175 We need to add a column to FP_CPTL_AST_INFO_T and CM_AST_PMT_DOC_T tables for enhancement work on KFSMI-7106</comment>
    <addColumn tableName='CM_AST_PMT_DOC_T'>
      <column name='AST_PMT_DIST_CD_FROM_FP_IND' type='VARCHAR2(1)' />
    </addColumn>   
    
     <comment>KFSMI-KFSMI-7145 Add fields, create parameters, permissions, and roles for KSMI-6702 Contribution</comment>
    <createTable tableName='CM_FSCL_YR_END_DEPR_HDR_T'>
      <column name='UNIV_FISCAL_YR' type='NUMBER(4)'>
                <constraints primaryKey="true" nullable="false"/>
      </column>
      <column name='OBJ_ID' type='VARCHAR2(36)'>
        <constraints nullable='false' />
      </column>
      <column name='VER_NBR' type='NUMBER(8)' defaultValue='1'>
        <constraints nullable='false' />
      </column>
      <column name='YEAR_END_DEPR_RUN_DATE' type='DATE'/>
      <column name='YEAR_END_DEPR_ACTV_IND' type='VARCHAR2(1)'/>
    </createTable>

    <createTable tableName='CM_FSCL_YR_END_DEPR_DTL_T'>
      <column name='UNIV_FISCAL_YR' type='NUMBER(4)'>
        <constraints primaryKey="true" nullable='false' />
      </column>
      <column name='OBJ_ID' type='VARCHAR2(36)'>
        <constraints nullable='false' />
      </column>
      <column name='VER_NBR' type='NUMBER(8)'>
        <constraints nullable='false' />
      </column>
      <column name='CPTLAST_NBR' type='NUMBER(12)'>
        <constraints primaryKey="true" nullable='false' />
      </column>
      <column name='YEAR_END_DEPR_DTL_ACTV_IND' type='VARCHAR2(1)'/>
      <column name='YEAR_END_DEPR_DTL_PROC_IND' type='VARCHAR2(1)'/>
    </createTable>
    
    <modifySql dbms='mysql'>
      <replace replace='SYS_GUID' with='uuid()' />
 	  <replace replace='VARCHAR2' with='VARCHAR' />
 	  <replace replace='NUMBER' with='DECIMAL' />
    </modifySql>
    <modifySql dbms='oracle'>
      <replace replace='SYS_GUID' with='sys_guid()' />
    </modifySql>
  </changeSet>
</databaseChangeLog>
