<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9 http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">

	<changeSet author="KFS50" id="UPGRADE_KIM_DATA_RICE_20_mysql" dbms="mysql">
		<sql>DROP PROCEDURE IF EXISTS kim_upgrade</sql>
		<sql splitStatements="false" stripComments="false"><![CDATA[
CREATE PROCEDURE kim_upgrade()
BEGIN
    DECLARE new_perm_nm, new_resp_nm VARCHAR(4000);
    DECLARE done INT DEFAULT FALSE;
    DECLARE v_perm_id, v_perm_nm, v_kim_typ_id, v_tmpl_nm, v_attr_val, v_rsp_id, v_doc_type, v_route_node VARCHAR(100);

    DECLARE cur_perm CURSOR FOR 
        select KRIM_PERM_T.perm_id, 
                IFNULL( KRIM_PERM_T.nm, KRIM_PERM_TMPL_T.nm ) as perm_nm, 
                KRIM_PERM_TMPL_T.kim_typ_id, 
                KRIM_PERM_TMPL_T.nm as tmpl_nm 
            from KRIM_PERM_T 
                join KRIM_PERM_TMPL_T on KRIM_PERM_T.perm_tmpl_id = KRIM_PERM_TMPL_T.perm_tmpl_id 
            where KRIM_PERM_T.nmspc_cd like 'KFS%'
              AND KRIM_PERM_TMPL_T.kim_typ_id != '1';

    DECLARE cur_resp CURSOR FOR
        SELECT KRIM_RSP_T.rsp_id, KRIM_RSP_ATTR_DATA_T.attr_val AS doc_type
            FROM KRIM_RSP_T, KRIM_RSP_ATTR_DATA_T
            WHERE KRIM_RSP_T.nmspc_cd like 'KFS%' 
              AND (KRIM_RSP_T.nm = 'Review' OR KRIM_RSP_T.nm IS NULL)
              AND KRIM_RSP_ATTR_DATA_T.rsp_id = KRIM_RSP_T.rsp_id
              AND KRIM_RSP_ATTR_DATA_T.kim_attr_defn_id = (select kim_attr_defn_id from KRIM_ATTR_DEFN_T where nm = 'documentTypeName');

    DECLARE cur_attrib_desc CURSOR FOR
        SELECT KRIM_PERM_ATTR_DATA_T.attr_val 
            FROM KRIM_PERM_ATTR_DATA_T 
                join KRIM_TYP_ATTR_T on KRIM_PERM_ATTR_DATA_T.kim_attr_defn_id = KRIM_TYP_ATTR_T.kim_attr_defn_id 
                where KRIM_TYP_ATTR_T.kim_typ_id = v_kim_typ_id 
                  and KRIM_PERM_ATTR_DATA_T.perm_id = v_perm_id 
             order by KRIM_TYP_ATTR_T.sort_cd desc;

    DECLARE cur_attrib_asc CURSOR FOR
        SELECT KRIM_PERM_ATTR_DATA_T.attr_val 
            FROM KRIM_PERM_ATTR_DATA_T 
                join KRIM_TYP_ATTR_T on KRIM_PERM_ATTR_DATA_T.kim_attr_defn_id = KRIM_TYP_ATTR_T.kim_attr_defn_id 
                where KRIM_TYP_ATTR_T.kim_typ_id = v_kim_typ_id 
                  and KRIM_PERM_ATTR_DATA_T.perm_id = v_perm_id 
             order by KRIM_TYP_ATTR_T.sort_cd;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE; 

    OPEN cur_perm;
    perm_loop: LOOP
        SET done = FALSE;
        FETCH cur_perm INTO v_perm_id, v_perm_nm, v_kim_typ_id, v_tmpl_nm;
        IF done THEN
            LEAVE perm_loop;
        END IF;
        //SELECT v_perm_id, v_perm_nm, v_kim_typ_id, v_tmpl_nm;
        SET new_perm_nm = v_perm_nm;
        if v_kim_typ_id != 1 then
            if v_tmpl_nm = 'Use Transactional Document' then
                SET done = FALSE;
                OPEN cur_attrib_desc;
                t_attr_loop: LOOP
                    FETCH cur_attrib_desc INTO v_attr_val;
                    IF done THEN
                        LEAVE t_attr_loop;
                    END IF;
                    SET new_perm_nm = CONCAT( new_perm_nm, ' ', v_attr_val );
                END LOOP;
                CLOSE cur_attrib_desc;
            else
                SET done = FALSE;
                OPEN cur_attrib_asc;
                attr_loop: LOOP
                    FETCH cur_attrib_asc INTO v_attr_val;
                    IF done THEN
                        LEAVE attr_loop;
                    END IF;
                    SET new_perm_nm = CONCAT( new_perm_nm, ' ', v_attr_val );
                END LOOP;
                CLOSE cur_attrib_asc;
            end if;
            IF LENGTH( new_perm_nm ) > 100 THEN
                SET new_perm_nm = CONCAT( LEFT( new_perm_nm, 97 ), '...' );
            END IF;
        end if;
        //SELECT new_perm_nm;
        UPDATE KRIM_PERM_T SET nm = new_perm_nm WHERE perm_id = v_perm_id;
    END LOOP;
    CLOSE cur_perm;
    COMMIT;

    OPEN cur_resp;
    resp_loop: LOOP
        SET done = FALSE;
        FETCH cur_resp INTO v_rsp_id, v_doc_type;
        IF done THEN
            LEAVE resp_loop;
        END IF;
        //SELECT v_rsp_id, v_doc_type;
        SELECT attr_val
            INTO v_route_node
            FROM KRIM_RSP_ATTR_DATA_T
            WHERE rsp_id = v_rsp_id
              AND kim_attr_defn_id = (select kim_attr_defn_id from KRIM_ATTR_DEFN_T where nm = 'routeNodeName');
        SET new_resp_nm = CONCAT( 'Review ', v_doc_type, ' ', v_route_node );
        //SELECT new_resp_nm;
        UPDATE KRIM_RSP_T SET nm = new_resp_nm WHERE rsp_id = v_rsp_id;
    END LOOP;
    CLOSE cur_resp;
    COMMIT;
END
]]></sql>
		<sql>call kim_upgrade()</sql>
		<sql>DROP PROCEDURE kim_upgrade</sql>
	</changeSet>

	<changeSet author="KFS50" id="UPGRADE_KIM_DATA_RICE_20_oracle" dbms="oracle">
		<comment>Upgrade the permission and responsibility names from previous releases of KFS to have unique names as required by Rice 2.0.</comment>
		<sql splitStatements="false" stripComments="false"><![CDATA[
			-- fix permissions
			declare
               v_perm_nm VARCHAR2(4000);
			begin
			    dbms_output.enable(50000);
			               for perm_dtl in (select krim_perm_t.perm_id, NVL( krim_perm_t.nm, krim_perm_tmpl_t.nm ) as perm_nm, krim_perm_tmpl_t.kim_typ_id, krim_perm_tmpl_t.nm as tmpl_nm from krim_perm_t join krim_perm_tmpl_t on krim_perm_t.perm_tmpl_id = krim_perm_tmpl_t.perm_tmpl_id where krim_perm_t.nmspc_cd like 'KFS%')
			               loop
			                              v_perm_nm := perm_dtl.perm_nm;
			        if (perm_dtl.kim_typ_id <> 1) then
			                                             if (perm_dtl.tmpl_nm = 'Use Transactional Document') then
			                                                            for perm_attr_val in (select krim_perm_attr_data_t.attr_val from krim_perm_attr_data_t join krim_typ_attr_t on krim_perm_attr_data_t.kim_attr_defn_id = krim_typ_attr_t.kim_attr_defn_id where krim_typ_attr_t.kim_typ_id = perm_dtl.kim_typ_id and krim_perm_attr_data_t.perm_id = perm_dtl.perm_id order by krim_typ_attr_t.sort_cd desc)
			                                                            loop
			                                                                           v_perm_nm := v_perm_nm || ' ' || perm_attr_val.attr_val;
			                                                            end loop;
			                                             else
			                                                            for perm_attr_val in (select krim_perm_attr_data_t.attr_val from krim_perm_attr_data_t join krim_typ_attr_t on krim_perm_attr_data_t.kim_attr_defn_id = krim_typ_attr_t.kim_attr_defn_id where krim_typ_attr_t.kim_typ_id = perm_dtl.kim_typ_id and krim_perm_attr_data_t.perm_id = perm_dtl.perm_id order by krim_typ_attr_t.sort_cd)
			                                                            loop
			                                                                           v_perm_nm := v_perm_nm || ' ' || perm_attr_val.attr_val;
			                                                            end loop;
			                                             end if;
			            if (length(v_perm_nm) > 100) then
			                                             v_perm_nm := substr(v_perm_nm, 1, 96) || '...';
			                              end if;
			        end if;
			                              -- and save the perm
			                              --dbms_output.put_line('update krim_perm_t set nm = '''||v_perm_nm||''' where perm_id = '''||perm_dtl.perm_id||''' ');
			                              execute immediate 'update krim_perm_t set nm = '''||v_perm_nm||''' where perm_id = '''||perm_dtl.perm_id||''' ';
			               end loop;
			end;
		]]></sql>
		<sql splitStatements="false" stripComments="false"><![CDATA[
			-- fix responsibilities
			declare
			               v_rsp_nm VARCHAR2(4000);
			begin
			               dbms_output.enable(50000);
			               for rsp_dtl in (select rsp_id from krim_rsp_t where nmspc_cd like 'KFS%' and NVL( nm, 'Review' ) = 'Review')
			               loop
			                              v_rsp_nm := 'Review';
			                              for rsp_doc_typ in (select attr_val from krim_rsp_attr_data_t where rsp_id = rsp_dtl.rsp_id and kim_attr_defn_id = (select kim_attr_defn_id from krim_attr_defn_t where nm = 'documentTypeName'))
			                              loop
			                                             v_rsp_nm := v_rsp_nm || ' ' || rsp_doc_typ.attr_val;
			                              end loop;
			                              for rsp_rte_node in (select attr_val from krim_rsp_attr_data_t where rsp_id = rsp_dtl.rsp_id and kim_attr_defn_id = (select kim_attr_defn_id from krim_attr_defn_t where nm = 'routeNodeName'))
			                              loop
			                                             v_rsp_nm := v_rsp_nm || ' ' || rsp_rte_node.attr_val;
			                              end loop;
			                              -- and save
			                              --dbms_output.put_line('update krim_rsp_t set nm = '''||v_rsp_nm||''' where rsp_id = '''||rsp_dtl.rsp_id||''' ');
			                              execute immediate 'update krim_rsp_t set nm = '''||v_rsp_nm||''' where rsp_id = '''||rsp_dtl.rsp_id||''' ';
			               end loop;
			end;
		]]></sql>
	</changeSet>

	<changeSet author="KFS50" id="FIX_ORG_GROUP_KIM_TYPE">
		<comment>The new 2.0 rice data contains an overlapping KIM type id.  We need to existing data to reference the updated "KFS68" KIM_TYP_ID.</comment>
		<sql>
INSERT INTO KRIM_TYP_T(KIM_TYP_ID, OBJ_ID, VER_NBR, NM, SRVC_NM, ACTV_IND, NMSPC_CD) 
    (SELECT 'KFS68', 'KFS68_2', VER_NBR, NM, SRVC_NM, ACTV_IND, NMSPC_CD 
        FROM KRIM_TYP_T
        WHERE KIM_TYP_ID = '68');
INSERT INTO KRIM_TYP_ATTR_T(KIM_TYP_ATTR_ID, OBJ_ID, VER_NBR, SORT_CD, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ACTV_IND) 
	(SELECT CONCAT('KFS68_',KIM_ATTR_DEFN_ID), CONCAT('KFS68_',KIM_ATTR_DEFN_ID), VER_NBR, SORT_CD, 'KFS68', KIM_ATTR_DEFN_ID, ACTV_IND 
        FROM KRIM_TYP_ATTR_T
        WHERE KIM_TYP_ID = '68');
UPDATE KRIM_GRP_T
    SET KIM_TYP_ID = 'KFS68'
    WHERE KIM_TYP_ID = '68';
UPDATE KRIM_GRP_ATTR_DATA_T
    SET KIM_TYP_ID = 'KFS68'
    WHERE KIM_TYP_ID = '68';
DELETE FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ID = '68';
DELETE FROM KRIM_TYP_T WHERE KIM_TYP_ID = '68';
COMMIT;
		</sql>
	</changeSet>

	<changeSet author="KFS50" id="FIX_ROLE_KIM_TYPE">
		<comment>The new 2.0 rice data contains an overlapping KIM type id.  We need to existing data to reference the updated "KFS69" KIM_TYP_ID.</comment>
		<sql>
UPDATE KRIM_ROLE_T SET KIM_TYP_ID = '1' WHERE role_id = '98';
UPDATE KRIM_TYP_T
    SET KIM_TYP_ID = 'KFS69' 
    WHERE KIM_TYP_ID = '69';
UPDATE KRIM_ROLE_T SET KIM_TYP_ID = 'KFS69' WHERE role_id = '98';
COMMIT;
		</sql>
	</changeSet>

	<changeSet author="KFS50" id="FIX_ROLE_ID">
		<comment>The new 2.0 rice data contains an overlapping KIM Role id.</comment>
		<sql>
UPDATE KRIM_ROLE_T SET role_id = 'KFS98' WHERE role_id = '98';
COMMIT;
		</sql>
	</changeSet>

	<changeSet author="KFS50" id="KFSAR-6012">
		<insert tableName="KRIM_PERM_T">
			<column name="PERM_ID" value="KFSAR6012" />
			<column name="OBJ_ID" value="KFSAR6012" />
			<column name="VER_NBR" valueNumeric="1" />
			<column name="PERM_TMPL_ID" value="33" />
			<column name="NMSPC_CD" value="KFS-AR" />
			<column name="NM" value="Upload Customer CSV Files" />
			<column name="DESC_TXT"
				value="Allows access to the Customer Upload Batch Upload page." />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="KRIM_PERM_ATTR_DATA_T">
			<column name="ATTR_DATA_ID" value="KFSAR6012-1" />
			<column name="OBJ_ID" value="KFSAR6012-1" />
			<column name="VER_NBR" valueNumeric="1" />
			<column name="PERM_ID" value="KFSAR6012" />
			<column name="KIM_TYP_ID" value="15" />
			<column name="KIM_ATTR_DEFN_ID" value="1" />
			<column name="ATTR_VAL" value="customerLoadCSVInputFileType" />
		</insert>
		<!-- Assign the permission to Roles KFS-SYS/User and KFS-SYS/System User -->
		<insert tableName="KRIM_ROLE_PERM_T">
			<column name="ROLE_PERM_ID" value="KFSAR6012-1" />
			<column name="OBJ_ID" value="KFSAR6012-1" />
			<column name="VER_NBR" valueNumeric="1" />
			<column name="ROLE_ID" value="2" />
			<column name="PERM_ID" value="KFSAR6012" />
			<column name="ACTV_IND" value="Y" />
		</insert>
	</changeSet>
	<changeSet author="KFS50" id="KFSMI-6808">
		<!-- KFSMI 6808 Allow Sub-Account routing by Chart/Org/Sub-account -->
		<update tableName="krim_typ_attr_t">
			<column name="sort_cd" value="e" />
			<where>kim_typ_attr_id='78' and sort_cd='d'</where>
		</update>
		<sql><![CDATA[
			insert into krim_typ_attr_t (kim_typ_attr_id, obj_id, ver_nbr,
			sort_cd,
			kim_typ_id, kim_attr_defn_id, actv_ind)
			values ('KFSSEC1010',
			'KFSSEC1010', 1, 'd',
			(select kim_typ_id from krim_typ_t where
			nmspc_cd = 'KFS-COA' and nm =
			'Sub-Account & Document Type'),
			(select
			kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KFS-COA'
			and
			nm = 'organizationCode'),
			'Y');
		]]></sql>
	</changeSet>

		<!-- KFSMI 6842 remove bad data from sub account review role -->
		<!-- JHK: these should not be here - they are only applicable to the demo dataset
		<delete tableName="KRIM_ROLE_MBR_T">
			<where>ROLE_ID="68" and MBR_TYP_CD="P" and MBR_ID="5390502344"
			</where>
		</delete>
		<delete tableName="KRIM_ROLE_MBR_T">
			<where>ROLE_ID="68" and MBR_TYP_CD="P" and MBR_ID="2615708929"
			</where>
		</delete>
		 -->

	<changeSet author="KFS50" id="KFSPURAP-6940">
		<!--KFSMI-KFSMI-6940 Establish permission for fully Unmask Field for purapDocumentIdentifier 
			attribute -->
		<insert tableName='KRIM_PERM_T'>
			<column name='PERM_ID' value='KFSPURAP6940' />
			<column name='OBJ_ID' value='KFSPURAP6940' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='PERM_TMPL_ID' value='27' />
			<column name='NMSPC_CD' value='KFS-PURAP' />
			<column name='NM' value='Unmask PO # On PO Document' />
			<column name='DESC_TXT'
				value='Authorizes users to view the entire Purchase Order Number on the PO Document and Inquiry' />
			<column name='ACTV_IND' value='Y' />
		</insert>
		<insert tableName='KRIM_PERM_ATTR_DATA_T'>
			<column name='ATTR_DATA_ID' value='KFSPURAP6940-01' />
			<column name='OBJ_ID' value='KFSPURAP6940-01' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='PERM_ID' value='KFSPURAP6940' />
			<column name='KIM_TYP_ID' value='11' />
			<column name='KIM_ATTR_DEFN_ID' value='5' />
			<column name='ATTR_VAL' value='PurchaseOrderDocument' />
		</insert>
		<insert tableName='KRIM_PERM_ATTR_DATA_T'>
			<column name='ATTR_DATA_ID' value='KFSPURAP6940-02' />
			<column name='OBJ_ID' value='KFSPURAP6940-02' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='PERM_ID' value='KFSPURAP6940' />
			<column name='KIM_TYP_ID' value='11' />
			<column name='KIM_ATTR_DEFN_ID' value='6' />
			<column name='ATTR_VAL' value='purapDocumentIdentifier' />
		</insert>
		<insert tableName='KRIM_ROLE_PERM_T'>
			<column name='ROLE_PERM_ID' value='KFSPURAP6940-01' />
			<column name='OBJ_ID' value='KFSPURAP6940-01' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='ROLE_ID' value='26' />
			<column name='PERM_ID' value='KFSPURAP6940' />
			<column name='ACTV_IND' value='Y' />
		</insert>
	</changeSet>
	<changeSet author="KFS50" id="KFSPURAP-7037">		
		<insert tableName='KRIM_RSP_T'>
			<column name='RSP_ID' value='126' />
			<column name='OBJ_ID' value='KFSPURAP7037' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='RSP_TMPL_ID' value='1' />
			<column name='NMSPC_CD' value='KFS-FP' />
			<column name='NM' value='DV Separation of Duties' />
			<column name='DESC_TXT' value='' />
			<column name='ACTV_IND' value='Y' />
		</insert>
		<insert tableName='KRIM_RSP_ATTR_DATA_T'>
			<column name='ATTR_DATA_ID' value='KFSFP7037A' />
			<column name='OBJ_ID' value='KFSFP7037A' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='RSP_ID' value='126' />
			<column name='KIM_TYP_ID' value='7' />
			<column name='KIM_ATTR_DEFN_ID' value='41' />
			<column name='ATTR_VAL' value='false' />
		</insert>
		<insert tableName='KRIM_RSP_ATTR_DATA_T'>
			<column name='ATTR_DATA_ID' value='KFSFP7037B' />
			<column name='OBJ_ID' value='KFSFP7037B' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='RSP_ID' value='126' />
			<column name='KIM_TYP_ID' value='7' />
			<column name='KIM_ATTR_DEFN_ID' value='16' />
			<column name='ATTR_VAL' value='SeparationOfDuties' />
		</insert>
		<insert tableName='KRIM_RSP_ATTR_DATA_T'>
			<column name='ATTR_DATA_ID' value='KFSFP7037C' />
			<column name='OBJ_ID' value='KFSFP7037C' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='RSP_ID' value='126' />
			<column name='KIM_TYP_ID' value='7' />
			<column name='KIM_ATTR_DEFN_ID' value='13' />
			<column name='ATTR_VAL' value='DV' />
		</insert>
		<insert tableName='KRIM_RSP_ATTR_DATA_T'>
			<column name='ATTR_DATA_ID' value='KFSFP7037D' />
			<column name='OBJ_ID' value='KFSFP7037D' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='RSP_ID' value='126' />
			<column name='KIM_TYP_ID' value='7' />
			<column name='KIM_ATTR_DEFN_ID' value='40' />
			<column name='ATTR_VAL' value='false' />
		</insert>
		<insert tableName='KRIM_ROLE_RSP_T'>
			<column name='ROLE_RSP_ID' value='KFSFP7037A' />
			<column name='OBJ_ID' value='KFSFP7037A' />
			<column name='VER_NBR' valueNumeric='4' />
			<column name='ROLE_ID' value='55' />
			<column name='RSP_ID' value='126' />
			<column name='ACTV_IND' value='Y' />
		</insert>
		<insert tableName='KRIM_ROLE_RSP_ACTN_T'>
			<column name='ROLE_RSP_ACTN_ID' value='KFSFP7037A' />
			<column name='OBJ_ID' value='KFSFP7037A' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='ACTN_TYP_CD' value='A' />
			<column name='PRIORITY_NBR' valueNumeric='1' />
			<column name='ACTN_PLCY_CD' value='F' />
			<column name='ROLE_MBR_ID' value='*' />
			<column name='ROLE_RSP_ID' value='KFSFP7037A' />
			<column name='FRC_ACTN' value='N' />
		</insert>
	</changeSet>
	<changeSet author="KFS50" id="KFSMI-6987">	
		<comment>KFSMI-KFSMI-6987 Employee Benefit Expense Calculation</comment>
		<insert tableName='KRIM_PERM_T'>
			<column name='PERM_ID' value='KFSLD6987' />
			<column name='OBJ_ID' value='KFSLD6987h' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='PERM_TMPL_ID' value='33' />
			<column name='NMSPC_CD' value='KFS-LD' />
			<column name='NM' value='Upload Labor Enterprise Feed Batch Files' />
			<column name='DESC_TXT'
				value='Allows access to the Labor Enterprise Feed Upload Batch Upload page.' />
			<column name='ACTV_IND' value='Y' />
		</insert>
		<insert tableName='KRIM_PERM_ATTR_DATA_T'>
			<column name='ATTR_DATA_ID' value='KFSLD6987' />
			<column name='OBJ_ID' value='KFSLD6987i' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='PERM_ID' value='KFSLD6987' />
			<column name='KIM_TYP_ID' value='15' />
			<column name='KIM_ATTR_DEFN_ID' value='1' />
			<column name='ATTR_VAL' value='laborEnterpriseFeederFileSetType' />
		</insert>
		<insert tableName='KRIM_ROLE_PERM_T'>
			<column name='ROLE_PERM_ID' value='45_KFSLD6987' />
			<column name='OBJ_ID' value='KFSLD6987j' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='ROLE_ID' value='45' />
			<column name='PERM_ID' value='KFSLD6987' />
			<column name='ACTV_IND' value='Y' />
		</insert>
	</changeSet>
	<changeSet author="KFS50" id="KFSMI-7145">
		<insert tableName='KRIM_PERM_T'>
			<column name='PERM_ID' value='KFSSYS7145a' />
			<column name='OBJ_ID' value='KFSSYS7145a' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='PERM_TMPL_ID' value='1' />
			<column name='NMSPC_CD' value='KFS-SYS' />
			<column name='NM' value='View Accounting Period' />
			<column name='DESC_TXT'
				value='Users who can view the accounting period field when enabled for year end processing.' />
			<column name='ACTV_IND' value='Y' />
		</insert>
		<insert tableName='KRIM_PERM_T'>
			<column name='PERM_ID' value='KFSSYS7145b' />
			<column name='OBJ_ID' value='KFSSYS7145b' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='PERM_TMPL_ID' value='1' />
			<column name='NMSPC_CD' value='KFS-SYS' />
			<column name='NM' value='Edit Accounting Period' />
			<column name='DESC_TXT'
				value='Users who can edit the accounting period field when enabled for year end processing.' />
			<column name='ACTV_IND' value='Y' />
		</insert>
		<insert tableName='KRIM_ROLE_T'>
			<column name='ROLE_ID' value='KFSSYS1' />
			<column name='OBJ_ID' value='KFSSYS7145' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='ROLE_NM' value='YearEnd' />
			<column name='NMSPC_CD' value='KR-WKFLW' />
			<column name='DESC_TXT' value='Year End' />
			<column name='KIM_TYP_ID' value='1' />
			<column name='ACTV_IND' value='Y' />
		</insert>

		<insert tableName='KRIM_ROLE_PERM_T'>
			<column name='ROLE_PERM_ID' value='KFSSYS7145a-01' />
			<column name='OBJ_ID' value='KFSSYS7145a-01' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='ROLE_ID' value='54' />
			<column name='PERM_ID' value='KFSSYS7145a' />
			<column name='ACTV_IND' value='Y' />
		</insert>
		<insert tableName='KRIM_ROLE_PERM_T'>
			<column name='ROLE_PERM_ID' value='KFSSYS7145a-02' />
			<column name='OBJ_ID' value='KFSSYS7145a-02' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='ROLE_ID' value='KFSSYS1' />
			<column name='PERM_ID' value='KFSSYS7145a' />
			<column name='ACTV_IND' value='Y' />
		</insert>
		<insert tableName='KRIM_ROLE_PERM_T'>
			<column name='ROLE_PERM_ID' value='KFSSYS7145b-01' />
			<column name='OBJ_ID' value='KFSSYS7145b-01' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='ROLE_ID' value='54' />
			<column name='PERM_ID' value='KFSSYS7145b' />
			<column name='ACTV_IND' value='Y' />
		</insert>
		<insert tableName='KRIM_ROLE_PERM_T'>
			<column name='ROLE_PERM_ID' value='KFSSYS7145b-02' />
			<column name='OBJ_ID' value='KFSSYS7145b-02' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='ROLE_ID' value='22' />
			<column name='PERM_ID' value='KFSSYS7145b' />
			<column name='ACTV_IND' value='Y' />
		</insert>
		<insert tableName='KRIM_ROLE_PERM_T'>
			<column name='ROLE_PERM_ID' value='KFSSYS7145b-03' />
			<column name='OBJ_ID' value='KFSSYS7145b-03' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='ROLE_ID' value='16' />
			<column name='PERM_ID' value='KFSSYS7145b' />
			<column name='ACTV_IND' value='Y' />
		</insert>
		<insert tableName='KRIM_ROLE_PERM_T'>
			<column name='ROLE_PERM_ID' value='KFSSYS7145b-04' />
			<column name='OBJ_ID' value='KFSSYS7145b-04' />
			<column name='VER_NBR' valueNumeric='1' />
			<column name='ROLE_ID' value='KFSSYS1' />
			<column name='PERM_ID' value='KFSSYS7145b' />
			<column name='ACTV_IND' value='Y' />
		</insert>
	</changeSet>
	
	<changeSet author="jksmith" id="KFSMI307_IMMEDIATE_DV_DISBURSEMENT_PERMISSION">
		<comment>Creates a permission to allow KFS-SYS Operations and KFS-FP Disbursement Manager to set a DV for immediate disbursement.</comment>
		<insert tableName="KRIM_PERM_T">
			<column name="PERM_ID" value="KFSSYS6007"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="PERM_TMPL_ID" valueNumeric=" (select perm_tmpl_id from krim_perm_tmpl_t where nmspc_cd = 'KR-NS' and nm = 'Use Transactional Document') "/>
			<column name="NMSPC_CD" value="KFS-FP"/>
			<column name="NM" value="Allow DV Immediate Disbursement"/>
			<column name="DESC_TXT" value="Allow Disbursement Voucher to be marked for immediate disbursement by the Pre-Disbursement Processor."/>
			<column name="ACTV_IND" value="Y"/>
		</insert>
		<insert tableName="KRIM_PERM_ATTR_DATA_T">
			<column name="ATTR_DATA_ID" value="KFSSYS6007-1"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="PERM_ID" value="KFSSYS6007"/>
			<column name="KIM_TYP_ID" valueNumeric=" (select kim_typ_id from krim_perm_tmpl_t where nmspc_cd = 'KR-NS' and nm = 'Use Transactional Document') "/>
			<column name="KIM_ATTR_DEFN_ID" valueNumeric=" (select kim_attr_defn_id from krim_attr_defn_t where nm = 'documentTypeName') "/>
			<column name="ATTR_VAL" value="DV"/>
		</insert>
		<insert tableName="KRIM_PERM_ATTR_DATA_T">
			<column name="ATTR_DATA_ID" value="KFSSYS6007-2"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="PERM_ID" value="KFSSYS6007"/>
			<column name="KIM_TYP_ID" valueNumeric=" (select kim_typ_id from krim_perm_tmpl_t where nmspc_cd = 'KR-NS' and nm = 'Use Transactional Document') "/>
			<column name="KIM_ATTR_DEFN_ID" valueNumeric=" (select kim_attr_defn_id from krim_attr_defn_t where nm = 'editMode') "/>
			<column name="ATTR_VAL" value="immediateDisbursementEntryMode"/>
		</insert>
		<insert tableName="KRIM_ROLE_PERM_T">
			<column name="ROLE_PERM_ID" value="KFSSYS6007-1"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="ROLE_ID" valueNumeric=" (select role_id from krim_role_t where nmspc_cd = 'KFS-FP' and role_nm = 'Disbursement Manager') "/>
			<column name="PERM_ID" value="KFSSYS6007"/>
			<column name="ACTV_IND" value="Y"/>
		</insert>
		<insert tableName="KRIM_ROLE_PERM_T">
			<column name="ROLE_PERM_ID" value="KFSSYS6007-2"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="ROLE_ID" valueNumeric=" (select role_id from krim_role_t where nmspc_cd = 'KFS-SYS' and role_nm = 'Operations') "/>
			<column name="PERM_ID" value="KFSSYS6007"/>
			<column name="ACTV_IND" value="Y"/>
		</insert>
	    <modifySql dbms="mysql">
	      <replace replace="sys_guid()" with="uuid()" />
	    </modifySql>
	</changeSet>

	<changeSet author="jksmith" id="KFSMI4553_NEW_ROLE_FOR_VENDOR_REVIEWER">
		<comment>New KIM role type, role, and responsibility action for KFS-VND Exclude Single Actor Reviewer.  This one is ugly, sorry about that...</comment>
		<insert tableName="KRIM_TYP_T">
			<column name="KIM_TYP_ID" value="KFSMI4553-1"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="NMSPC_CD" value="KFS-SYS"/>
			<column name="NM" value="Exclude Single Actor Separation Of Duties"/>
			<column name="SRVC_NM" value="excludeSingleActorSeparationOfDutiesRoleTypeService"/>
			<column name="ACTV_IND" value="Y"/>
		</insert>
		<insert tableName="KRIM_ROLE_T">
			<column name="ROLE_ID" value="KFSMI4553-2"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="NMSPC_CD" value="KFS-VND"/>
			<column name="ROLE_NM" value="Exclude Single Actor Reviewer"/>
			<column name="KIM_TYP_ID" value="KFSMI4553-1"/>
			<column name="ACTV_IND" value="Y"/>
			<column name="LAST_UPDT_DT" value="SYSDATE"/>
		</insert>
		<insert tableName="KRIM_ROLE_MBR_T">
			<column name="ROLE_MBR_ID" value="KFSMI4553-3"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="ROLE_ID" value="KFSMI4553-2"/>
			<column name="MBR_ID" valueNumeric=" (select role_id from krim_role_t where nmspc_cd = 'KFS-VND' and role_nm = 'Reviewer') "/>
			<column name="MBR_TYP_CD" value="R"/>
			<column name="LAST_UPDT_DT" value="SYSDATE"/>
		</insert>
		<delete tableName="KRIM_ROLE_RSP_ACTN_T">
			<where>role_rsp_id in (select role_rsp_id from krim_role_rsp_t where role_id = (select role_id from krim_role_t where nmspc_cd = 'KFS-VND' and role_nm = 'Reviewer') and rsp_id = (select krim_rsp_t.rsp_id from krim_rsp_t join ((select rsp_id from krim_rsp_attr_data_t where kim_attr_defn_id = (select kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KR-WKFLW' and nm = 'documentTypeName') and attr_val = 'PVEN') r_a_d1 join (select rsp_id from krim_rsp_attr_data_t where kim_attr_defn_id = (select kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KR-WKFLW' and nm = 'routeNodeName') and attr_val = 'Management') r_a_d2 on r_a_d1.rsp_id = r_a_d2.rsp_id) on krim_rsp_t.rsp_id = r_a_d1.rsp_id where krim_rsp_t.nmspc_cd = 'KFS-VND'))</where>
		</delete>
		<delete tableName="KRIM_ROLE_RSP_T">
			<where>role_id = (select role_id from krim_role_t where nmspc_cd = 'KFS-VND' and role_nm = 'Reviewer') and rsp_id = (select krim_rsp_t.rsp_id from krim_rsp_t join ((select rsp_id from krim_rsp_attr_data_t where kim_attr_defn_id = (select kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KR-WKFLW' and nm = 'documentTypeName') and attr_val = 'PVEN') r_a_d1 join (select rsp_id from krim_rsp_attr_data_t where kim_attr_defn_id = (select kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KR-WKFLW' and nm = 'routeNodeName') and attr_val = 'Management') r_a_d2 on r_a_d1.rsp_id = r_a_d2.rsp_id) on krim_rsp_t.rsp_id = r_a_d1.rsp_id where krim_rsp_t.nmspc_cd = 'KFS-VND')</where>
		</delete>
		<insert tableName="KRIM_ROLE_RSP_T">
			<column name="ROLE_RSP_ID" value="KFSMI4553-4"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="ROLE_ID" value="KFSMI4553-2"/>
			<column name="RSP_ID" valueNumeric=" (select krim_rsp_t.rsp_id from krim_rsp_t join ((select rsp_id from krim_rsp_attr_data_t where kim_attr_defn_id = (select kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KR-WKFLW' and nm = 'documentTypeName') and attr_val = 'PVEN') r_a_d1 join (select rsp_id from krim_rsp_attr_data_t where kim_attr_defn_id = (select kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KR-WKFLW' and nm = 'routeNodeName') and attr_val = 'Management') r_a_d2 on r_a_d1.rsp_id = r_a_d2.rsp_id) on krim_rsp_t.rsp_id = r_a_d1.rsp_id where krim_rsp_t.nmspc_cd = 'KFS-VND') "/>
			<column name="ACTV_IND" value="Y"/>
		</insert>
		<insert tableName="KRIM_ROLE_RSP_ACTN_T">
			<column name="ROLE_RSP_ACTN_ID" value="KFSMI4553-5"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="ACTN_TYP_CD" value="A"/>
			<column name="ACTN_PLCY_CD" value="F"/>
			<column name="ROLE_MBR_ID" value="*"/>
			<column name="ROLE_RSP_ID" value="KFSMI4553-4"/>
			<column name="FRC_ACTN" value="Y"/>
		</insert>
	    <modifySql dbms="mysql">
	      <replace replace="sys_guid()" with="uuid()" />
	    </modifySql>
	</changeSet>
	
	<changeSet author="jksmith" id="KFSMI6732_PREROUTE_EDIT_DOCUMENT_PERMISSION_FOR_PAYMENT_APPLICATION">
		<comment>Creates a permission to allow KR-WKFLW Initiator and KFS-SYS Accounts Receivable Lockbox Manager to edit a Payment Application document pre-route.</comment>
		<insert tableName="KRIM_PERM_T">
			<column name="PERM_ID" value="KFSAR6732"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="PERM_TMPL_ID" valueNumeric=" (select perm_tmpl_id from krim_perm_tmpl_t where nmspc_cd = 'KR-NS' and nm = 'Edit Document') "/>
			<column name="NMSPC_CD" value="KFS-AR"/>
			<column name="NM" value="Edit APP Document-PreRoute"/>
			<column name="DESC_TXT" value="Edit permission for the Payment Application document prior to the document being submitted."/>
			<column name="ACTV_IND" value="Y"/>
		</insert>
		<insert tableName="KRIM_PERM_ATTR_DATA_T">
			<column name="ATTR_DATA_ID" value="KFSAR6732-1"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="PERM_ID" value="KFSAR6732"/>
			<column name="KIM_TYP_ID" valueNumeric=" (select kim_typ_id from krim_perm_tmpl_t where nmspc_cd = 'KR-NS' and nm = 'Edit Document') "/>
			<column name="KIM_ATTR_DEFN_ID" valueNumeric=" (select kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KR-WKFLW' and nm = 'documentTypeName') "/>
			<column name="ATTR_VAL" value="APP"/>
		</insert>
		<insert tableName="KRIM_PERM_ATTR_DATA_T">
			<column name="ATTR_DATA_ID" value="KFSAR6732-2"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="PERM_ID" value="KFSAR6732"/>
			<column name="KIM_TYP_ID" valueNumeric=" (select kim_typ_id from krim_perm_tmpl_t where nmspc_cd = 'KR-NS' and nm = 'Edit Document') "/>
			<column name="KIM_ATTR_DEFN_ID" valueNumeric=" (select kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KR-WKFLW' and nm = 'routeNodeName') "/>
			<column name="ATTR_VAL" value="PreRoute"/>
		</insert>
		<insert tableName="KRIM_ROLE_PERM_T">
			<column name="ROLE_PERM_ID" value="KFSAR6732-1"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="ROLE_ID" valueNumeric=" (select role_id from krim_role_t where nmspc_cd = 'KFS-SYS' and role_nm = 'Accounts Receivable Lockbox Manager') "/>
			<column name="PERM_ID" value="KFSAR6732"/>
			<column name="ACTV_IND" value="Y"/>
		</insert>
		<insert tableName="KRIM_ROLE_PERM_T">
			<column name="ROLE_PERM_ID" value="KFSAR6732-2"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="ROLE_ID" valueNumeric=" (select role_id from krim_role_t where nmspc_cd = 'KR-WKFLW' and role_nm = 'Initiator') "/>
			<column name="PERM_ID" value="KFSAR6732"/>
			<column name="ACTV_IND" value="Y"/>
		</insert>
	    <modifySql dbms="mysql">
	      <replace replace="sys_guid()" with="uuid()" />
	    </modifySql>
	</changeSet>
	
	<changeSet author="jksmith" id="KFSMI5340_ROLE_FOR_INVOICE_PROCESSING_EDITORS">
		<comment>A new role and a permission associated which will allow a select group of users to edit the processing organization fields on a Customer Invoice document.  Based on SQL by Kalani Ekanayake.</comment>
		<insert tableName="KRIM_ROLE_T">
			<column name="ROLE_ID" value="KFSAR5340R"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="NMSPC_CD" value="KFS-AR"/>
			<column name="ROLE_NM" value="Multi Organization Invoicer"/>
			<column name="KIM_TYP_ID" valueNumeric=" (select kim_typ_id from krim_typ_t where nm = 'Default' and nmspc_cd = 'KUALI' and actv_ind = 'Y') "/>
			<column name="ACTV_IND" value="Y"/>
			<column name="LAST_UPDT_DT" value="SYSDATE"/>
		</insert>
		<insert tableName="KRIM_PERM_T">
			<column name="PERM_ID" value="KFSAR5340P"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="PERM_TMPL_ID" valueNumeric=" (select perm_tmpl_id from krim_perm_tmpl_t where nmspc_cd = 'KR-NS' and nm = 'Use Transactional Document') "/>
			<column name="NMSPC_CD" value="KFS-AR"/>
			<column name="NM" value="Edit Invoice Processing Organization"/>
			<column name="DESC_TXT" value="Users who can edit the Processing Chart Code and the processing organization fields on the Customer Invoice Document."/>
			<column name="ACTV_IND" value="Y"/>
		</insert>
		<insert tableName="KRIM_PERM_ATTR_DATA_T">
			<column name="ATTR_DATA_ID" value="KFSAR5340P-1"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="PERM_ID" value="KFSAR5340P"/>
			<column name="KIM_TYP_ID" valueNumeric=" (select kim_typ_id from krim_perm_tmpl_t where nmspc_cd = 'KR-NS' and nm = 'Use Transactional Document') "/>
			<column name="KIM_ATTR_DEFN_ID" valueNumeric=" (select kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KR-WKFLW' and nm = 'documentTypeName') "/>
			<column name="ATTR_VAL" value="INV"/>
		</insert>
		<insert tableName="KRIM_PERM_ATTR_DATA_T">
			<column name="ATTR_DATA_ID" value="KFSAR5340P-2"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="PERM_ID" value="KFSAR5340P"/>
			<column name="KIM_TYP_ID" valueNumeric=" (select kim_typ_id from krim_perm_tmpl_t where nmspc_cd = 'KR-NS' and nm = 'Use Transactional Document') "/>
			<column name="KIM_ATTR_DEFN_ID" valueNumeric=" (select kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KR-NS' and nm = 'editMode') "/>
			<column name="ATTR_VAL" value="processingOrganizationMode"/>
		</insert>
		<insert tableName="KRIM_ROLE_PERM_T">
			<column name="ROLE_PERM_ID" value="KFSAR5340RP"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1"/>
			<column name="ROLE_ID" value="KFSAR5340R"/>
			<column name="PERM_ID" value="KFSAR5340P"/>
			<column name="ACTV_IND" value="Y"/>
		</insert>
	    <modifySql dbms="mysql">
	      <replace replace="sys_guid()" with="uuid()" />
	    </modifySql>
	</changeSet>
	
	<changeSet author="jksmith" id="KFSMI6886_PAYEE_ACH_ADMIN_ROLE">
		<comment>New role for administration of Payee ACH Accounts, with attendant new KIM role type and permissions.  SQL contributed by Ying.</comment>
		<insert tableName="KRIM_TYP_T">
			<column name="KIM_TYP_ID" value="KFSMI6886-TYP"/>
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="NMSPC_CD" value="KFS-PDP" />
			<column name="NM" value="Payee ACH Account" />
			<column name="SRVC_NM" value="payeeACHAccountRoleTypeService" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="KRIM_ATTR_DEFN_T">
			<column name="KIM_ATTR_DEFN_ID" value="KFSMI6886-ATTRDEF" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="NMSPC_CD" value="KFS-PDP" />
			<column name="NM" value="achTransactionTypeCode" />
			<column name="CMPNT_NM" value="org.kuali.kfs.sys.identity.KfsKimAttributes" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="KRIM_TYP_ATTR_T">
			<column name="KIM_TYP_ATTR_ID" value="KFSMI6886-TYPEATTR" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="SORT_CD" value="a" />
			<column name="KIM_TYP_ID" value="KFSMI6886-TYP" />
			<column name="KIM_ATTR_DEFN_ID" value="KFSMI6886-ATTRDEF" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="KRIM_ROLE_T">
			<column name="ROLE_ID" value="KFSMI6886-ROLE" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="NMSPC_CD" value="KFS-PDP" />
			<column name="ROLE_NM" value="Payee ACH Accounts Administrator" />
			<column name="DESC_TXT" value="Administration staff who can view and update Payee ACH Account records and the legacy history of a certain ACH Transaction Type." />
			<column name="KIM_TYP_ID" value="KFSMI6886-TYP" />
			<column name="ACTV_IND" value="Y" />
			<column name="LAST_UPDT_DT" value="SYSDATE" />
		</insert>
		<!-- DEMO DATA - SHOULD NOT BE IN UPGRADE SCRIPTS -->
		<!-- 
		<insert tableName="KRIM_ROLE_MBR_T">
			<column name="ROLE_MBR_ID" value="KFSMI6886-ROLE-P1" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="MBR_ID" valueNumeric=" (select prncpl_id from krim_prncpl_t where prncpl_nm = 'ahrens') " />
			<column name="MBR_TYP_CD" value="P" />
			<column name="ROLE_ID" value="KFSMI6886-ROLE" />
			<column name="LAST_UPDT_DT" value="SYSDATE" />
		</insert>
		<insert tableName="KRIM_ROLE_MBR_T">
			<column name="ROLE_MBR_ID" value="KFSMI6886-ROLE-P2" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="ROLE_ID" value="KFSMI6886-ROLE" />
			<column name="MBR_ID" valueNumeric=" (select prncpl_id from krim_prncpl_t where prncpl_nm = 'dcote') " />
			<column name="MBR_TYP_CD" value="P" />
			<column name="LAST_UPDT_DT" value="SYSDATE" />
		</insert>
		<insert tableName="KRIM_ROLE_MBR_ATTR_DATA_T">
			<column name="ATTR_DATA_ID" value="KFSMI6886-AD1" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="ROLE_MBR_ID" value="KFSMI6886-ROLE-P2" />
			<column name="KIM_TYP_ID" value="KFSMI6886-TYP" />
			<column name="KIM_ATTR_DEFN_ID" value="KFSMI6886-ATTRDEF" />
			<column name="ATTR_VAL" value="E" />
		</insert>
		-->
		<insert tableName="KRIM_PERM_T">
			<column name="PERM_ID" value="KFSMI6886-PRM1" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="PERM_TMPL_ID" valueNumeric=" (select perm_tmpl_id from krim_perm_tmpl_t where nm = 'Create / Maintain Record(s)' and nmspc_cd = 'KR-NS') " />
			<column name="NMSPC_CD" value="KFS-PDP" />
			<column name="NM" value="Maintain ACH Accounts" />
			<column name="DESC_TXT" value="Allows to view and update Payee ACH Accounts of a certain transaction type." />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="KRIM_PERM_ATTR_DATA_T">
			<column name="ATTR_DATA_ID" value="KFSMI6886-AT1" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="PERM_ID" value="KFSMI6886-PRM1" />
			<column name="KIM_TYP_ID" valueNumeric=" (select kim_typ_id from krim_perm_tmpl_t where nm = 'Create / Maintain Record(s)' and nmspc_cd = 'KR-NS') " />
			<column name="KIM_ATTR_DEFN_ID" valueNumeric=" (select kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KR-WKFLW' and nm = 'documentTypeName') " />
			<column name="ATTR_VAL" value="PAAT" />
		</insert>
		<insert tableName="KRIM_PERM_ATTR_DATA_T">
			<column name="ATTR_DATA_ID" value="KFSMI6886-AT2" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="PERM_ID" value="KFSMI6886-PRM1" />
			<column name="KIM_TYP_ID" valueNumeric=" (select kim_typ_id from krim_perm_tmpl_t where nm = 'Create / Maintain Record(s)' and nmspc_cd = 'KR-NS') " />
			<column name="KIM_ATTR_DEFN_ID" valueNumeric=" (select kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KR-NS' and nm = 'existingRecordsOnly') " />
			<column name="ATTR_VAL" value="false" />
		</insert>
		<insert tableName="KRIM_ROLE_PERM_T">
			<column name="ROLE_PERM_ID" value="KFSMI6886-RLPRM1" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="ROLE_ID" value="KFSMI6886-ROLE" />
			<column name="PERM_ID" value="KFSMI6886-PRM1" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="KRIM_PERM_T">
			<column name="PERM_ID" value="KFSMI6886-PRM2" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="PERM_TMPL_ID" valueNumeric=" (select perm_tmpl_id from krim_perm_tmpl_t where nm = 'Look Up Records' and nmspc_cd = 'KR-NS') " />
			<column name="NMSPC_CD" value="KFS-PDP" />
			<column name="NM" value="Lookup ACH Accounts" />
			<column name="DESC_TXT" value="Allows the lookup of Payee ACH Account records of certain transaction type(s)." />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="KRIM_PERM_ATTR_DATA_T">
			<column name="ATTR_DATA_ID" value="KFSMI6886-AT3" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="PERM_ID" value="KFSMI6886-PRM2" />
			<column name="KIM_TYP_ID" valueNumeric=" (select kim_typ_id from krim_perm_tmpl_t where nm = 'Look Up Records' and nmspc_cd = 'KR-NS') " />
			<column name="KIM_ATTR_DEFN_ID" valueNumeric=" (select kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KR-NS' and nm = 'componentName') " />
			<column name="ATTR_VAL" value="PayeeACHAccount" />
		</insert>
		<insert tableName="KRIM_PERM_ATTR_DATA_T">
			<column name="ATTR_DATA_ID" value="KFSMI6886-AT4" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="PERM_ID" value="KFSMI6886-PRM2" />
			<column name="KIM_TYP_ID" valueNumeric=" (select kim_typ_id from krim_perm_tmpl_t where nm = 'Look Up Records' and nmspc_cd = 'KR-NS') " />
			<column name="KIM_ATTR_DEFN_ID" valueNumeric=" (select kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KR-NS' and nm = 'namespaceCode') " />
			<column name="ATTR_VAL" value="KFS-PDP" />
		</insert>
		<insert tableName="KRIM_ROLE_PERM_T">
			<column name="ROLE_PERM_ID" value="KFSMI6886-RLPRM2" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="ROLE_ID" value="KFSMI6886-ROLE" />
			<column name="PERM_ID" value="KFSMI6886-PRM2" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="KRIM_PERM_T">
			<column name="PERM_ID" value="KFSMI6886-PRM3" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="PERM_TMPL_ID" valueNumeric=" (select perm_tmpl_id from krim_perm_tmpl_t where nm = 'Initiate Document' and nmspc_cd = 'KR-SYS') " />
			<column name="NMSPC_CD" value="KFS-PDP" />
			<column name="NM" value="Initiate ACH Account Document" />
			<column name="DESC_TXT" value="Allows initiation the PDP Payee ACH Account maintenance document." />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="KRIM_PERM_ATTR_DATA_T">
			<column name="ATTR_DATA_ID" value="KFSMI6886-AT5" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="PERM_ID" value="KFSMI6886-PRM3" />
			<column name="KIM_TYP_ID" valueNumeric=" (select kim_typ_id from krim_perm_tmpl_t where nm = 'Initiate Document' and nmspc_cd = 'KR-SYS') " />
			<column name="KIM_ATTR_DEFN_ID" valueNumeric=" (select kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KR-WKFLW' and nm = 'documentTypeName') " />
			<column name="ATTR_VAL" value="PAAT" /> <!-- It's PAAT! -->
		</insert>
		<insert tableName="KRIM_ROLE_PERM_T">
			<column name="ROLE_PERM_ID" value="KFSMI6886-RLPRM3" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="ROLE_ID" valueNumeric=" (select role_id from krim_role_t where nmspc_cd = 'KFS-PDP' and role_nm = 'Payee ACH Accounts Administrator') " />
			<column name="PERM_ID" value="KFSMI6886-PRM3" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="KRIM_ROLE_PERM_T">
			<column name="ROLE_PERM_ID" value="KFSMI6886-RLPRM4" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="ROLE_ID" valueNumeric=" (select role_id from krim_role_t where nmspc_cd = 'KFS-SYS' and role_nm = 'Operations') " />
			<column name="PERM_ID" value="KFSMI6886-PRM3" />
			<column name="ACTV_IND" value="Y" />
		</insert>
	    <modifySql dbms='mysql'>
	      <replace replace="sys_guid()" with="uuid()" />
	    </modifySql>
	</changeSet>
	
	<changeSet author="jksmith" id="KFSMI7041_PERM_TO_USE_FRINGE_BENEFIT_INQUIRY_ACTION">
		<comment>Create a KR-NS Use Screen template permission for the org.kuali.kfs.module.ld.document.web.struts.FringeBenefitInquiryAction.</comment>
		<insert tableName="KRIM_PERM_T">
			<column name="PERM_ID" value="KFSMI7041-PRM" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="PERM_TMPL_ID" valueNumeric=" (select perm_tmpl_id from krim_perm_tmpl_t where nmspc_cd = 'KR-NS' and nm = 'Use Screen') " />
			<column name="NMSPC_CD" value="KFS-LD" />
			<column name="NM" value="View Fringe Benefit Inquiry" />
			<column name="DESC_TXT" value="Permits access to screens controlled by org.kuali.kfs.module.ld.document.web.struts.FringeBenefitInquiryAction" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="KRIM_PERM_ATTR_DATA_T">
			<column name="ATTR_DATA_ID" value="KFSMI7041-AT1" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="PERM_ID" value="KFSMI7041-PRM" />
			<column name="KIM_TYP_ID" valueNumeric=" (select kim_typ_id from krim_perm_tmpl_t where nmspc_cd = 'KR-NS' and nm = 'Use Screen') " />
			<column name="KIM_ATTR_DEFN_ID" valueNumeric=" (select kim_attr_defn_id from krim_attr_defn_t where nmspc_cd = 'KR-SYS' and nm = 'actionClass') " />
			<column name="ATTR_VAL" value="org.kuali.kfs.module.ld.document.web.struts.FringeBenefitInquiryAction" />
		</insert>
		<insert tableName="KRIM_ROLE_PERM_T">
			<column name="ROLE_PERM_ID" value="KFSMI7041-RLPRM1" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="ROLE_ID" valueNumeric=" (select role_id from krim_role_t where nmspc_cd = 'KFS-SYS' and role_nm = 'User') " />
			<column name="PERM_ID" value="KFSMI7041-PRM" />
			<column name="ACTV_IND" value="Y" />
		</insert>
	    <modifySql dbms='mysql'>
	      <replace replace="sys_guid()" with="uuid()" />
	    </modifySql>
	</changeSet>
	
	<changeSet author="jksmith" id="KFSCNTRB162_DEBARRED_VENDOR_TRACKING_PERMS">
		<comment>New parameters for debarred vendor tracking process as well as the permission to upload the vendor exclusion file.</comment>
		<insert tableName="KRIM_PERM_T">
			<column name="PERM_ID" value="KFSCNTRB162-PRM" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="PERM_TMPL_ID" value="select perm_tmpl_id from krim_perm_tmpl_t where nmspc_cd = 'KR-NS' and nm = 'Upload Batch Input File(s)'" />
			<column name="NMSPC_CD" value="KFS-VND" />
			<column name="NM" value="Use Vendor Exclude File Upload Screen" />
			<column name="DESC_TXT" value="Authorizes users to access the Vendor Exclude File Upload page." />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="KRIM_PERM_ATTR_DATA_T">
			<column name="ATTR_DATA_ID" value="KFSCNTRB162-AT1" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="PERM_ID" value="KFSCNTRB162-PRM" />
			<column name="KIM_TYP_ID" valueNumeric=" (select kim_typ_id from krim_perm_tmpl_t where nmspc_cd = 'KR-NS' and nm = 'Upload Batch Input File(s)') " />
			<column name="KIM_ATTR_DEFN_ID" valueNumeric=" (select kim_attr_defn_id from krim_attr_defn_t where nm = 'beanName') " />
			<column name="ATTR_VAL" value="vendorExcludeInputFileType" />
		</insert>
		<insert tableName="KRIM_ROLE_PERM_T">
			<column name="ROLE_PERM_ID" value="KFSCNTRB162-RLPRM1" />
			<column name="OBJ_ID" valueNumeric="sys_guid() "/>
			<column name="VER_NBR" value="1" />
			<column name="ROLE_ID" valueNumeric=" (select role_id from krim_role_t where nmspc_cd = 'KFS-VND' and role_nm = 'Reviewer') " />
			<column name="PERM_ID" value="KFSCNTRB162-PRM" />
			<column name="ACTV_IND" value="Y" />
		</insert>
	    <modifySql dbms='mysql'>
	      <replace replace="sys_guid()" with="uuid()" />
	    </modifySql>
	</changeSet>
	
</databaseChangeLog>