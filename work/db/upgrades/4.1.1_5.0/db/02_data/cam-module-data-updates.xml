<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns='http://www.liquibase.org/xml/ns/dbchangelog'
	xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
	xsi:schemaLocation='http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd'>
	<changeSet author="KFS50" id="KFS_50_Data_AST_PMT_DST_CD">
		<comment>KFSMI-KFSMI-5998 </comment>
		<insert tableName="CM_AST_PMT_DST_CD_T">
			<column name="AST_PMT_DST_CD" value="1" />
			<column name="OBJ_ID" valueNumeric="SYS_GUID" />
			<column name="VER_NBR" valueNumeric="1" />
			<column name="AST_PMT_DST_NM" value="Distribute cost by amount" />
			<column name="AST_PMT_DST_COL_NM" value="Allocate Amount" />
			<column name="AST_PMT_DST_EDT" value="N" />
			<column name="ROW_ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DST_CD_T">
			<column name="AST_PMT_DST_CD" value="2" />
			<column name="OBJ_ID" valueNumeric="SYS_GUID" />
			<column name="VER_NBR" valueNumeric="1" />
			<column name="AST_PMT_DST_NM" value="Distribute cost evenly" />
			<column name="AST_PMT_DST_COL_NM" value="Allocated" />
			<column name="AST_PMT_DST_EDT" value="N" />
			<column name="ROW_ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DST_CD_T">
			<column name="AST_PMT_DST_CD" value="3" />
			<column name="OBJ_ID" valueNumeric="SYS_GUID" />
			<column name="VER_NBR" valueNumeric="1" />
			<column name="AST_PMT_DST_NM" value="Distribute cost by total cost" />
			<column name="AST_PMT_DST_COL_NM" value="Allocated" />
			<column name="AST_PMT_DST_EDT" value="N" />
			<column name="ROW_ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DST_CD_T">
			<column name="AST_PMT_DST_CD" value="4" />
			<column name="OBJ_ID" valueNumeric="SYS_GUID" />
			<column name="VER_NBR" valueNumeric="1" />
			<column name="AST_PMT_DST_NM" value="Distribute cost by percentage" />
			<column name="AST_PMT_DST_COL_NM" value="Allocate Percentage" />
			<column name="AST_PMT_DST_EDT" value="Y" />
			<column name="ROW_ACTV_IND" value="Y" />
		</insert>
		<modifySql dbms="mysql">
			<replace replace="SYS_GUID" with="uuid()" />
		</modifySql>
		<modifySql dbms="oracle">
			<replace replace="SYS_GUID" with="sys_guid()" />
		</modifySql>
	</changeSet>
	<changeSet author="KFS50" id="KFS_50_Data_CM_CPTLAST_T_oracle"
		context="manualRun" dbms="oracle">
		<comment>KFSMI-6628 sql script to correct Total Costs in the Asset Detail Tab</comment>
		<sql><![CDATA[
			update CM_CPTLAST_T set cptlast_totcst_amt = (select
			sum(acct_charge_amt)
			from CM_AST_PAYMENT_T s where
			s.cptlast_nbr=CM_CPTLAST_T.cptlast_nbr)
			where rowid in (select t.rowid
			from CM_CPTLAST_T t where exists (select *
			from (select
			sum(s.acct_charge_amt) pmt_sum, s.cptlast_nbr ast_nbr from
			CM_AST_PAYMENT_T s, CM_CPTLAST_T t
			where s.cptlast_nbr = t.cptlast_nbr
			group by s.cptlast_nbr)
			where ast_nbr = t.cptlast_nbr
			and pmt_sum <>
			t.cptlast_totcst_amt));
		]]></sql>
	</changeSet>
	<changeSet author="KFS50" id="KFS_50_Data_CM_CPTLAST_T_MySQL"
		context="manualRun" dbms="mysql">
		<comment>KFSMI-6628 sql script to correct Total Costs in the Asset Detail Tab</comment>
		<sql><![CDATA[
			update CM_CPTLAST_T as T5
			INNER JOIN
			(select * from CM_CPTLAST_T as T2, (select sum(s.acct_charge_amt) pmt_sum,
			s.cptlast_nbr ast_nbr
			from CM_AST_PAYMENT_T as s, CM_CPTLAST_T as t
			where s.cptlast_nbr = t.cptlast_nbr
			group by s.cptlast_nbr) as T1 where T1.ast_nbr = T2.CPTLAST_NBR and
			T1.pmt_sum<> T2.cptlast_totcst_amt) as T4 ON (T4.cptlast_nbr =
			T5.cptlast_nbr)
			set T5.cptlast_totcst_amt = (select sum(acct_charge_amt) from
			CM_AST_PAYMENT_T as s where s.cptlast_nbr=T5.cptlast_nbr)
		]]></sql>
	</changeSet>

	<changeSet author="KFS50" id="KFSMI7058_ASSET_PMT_DOC_SAMPLE_DATA">
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="1" />
			<column name="OBJ_ID" valueNumeric="sys_guid() " />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="AA" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="2" />
			<column name="OBJ_ID" valueNumeric="sys_guid() " />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="MPAY" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="3" />
			<column name="OBJ_ID" valueNumeric="sys_guid() " />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="AD" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="4" />
			<column name="OBJ_ID" valueNumeric="sys_guid() " />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="CR" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="5" />
			<column name="OBJ_ID" valueNumeric="sys_guid() " />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="CCR" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="6" />
			<column name="OBJ_ID" valueNumeric="sys_guid() " />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="DI" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="7" />
			<column name="OBJ_ID" valueNumeric="sys_guid() " />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="DV" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="8" />
			<column name="OBJ_ID" valueNumeric="sys_guid() " />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="GEC" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="9" />
			<column name="OBJ_ID" valueNumeric="sys_guid() " />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="IB" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="10" />
			<column name="OBJ_ID" valueNumeric="sys_guid() " />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="JV" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="11" />
			<column name="OBJ_ID" value="sys_guid()" />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="SB" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="12" />
			<column name="OBJ_ID" valueNumeric="sys_guid() " />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="YEDI" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="13" />
			<column name="OBJ_ID" valueNumeric="sys_guid() " />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="YEGE" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="14" />
			<column name="OBJ_ID" valueNumeric="sys_guid() " />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="PCDO" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="15" />
			<column name="OBJ_ID" valueNumeric="sys_guid() " />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="PREQ" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="16" />
			<column name="OBJ_ID" valueNumeric="sys_guid() " />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="CM" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<insert tableName="CM_AST_PMT_DOC_TYP_T">
			<column name="DOC_TYP_ID" value="17" />
			<column name="OBJ_ID" valueNumeric="sys_guid() " />
			<column name="VER_NBR" value="1" />
			<column name="DOC_TYP_NM" value="ND" />
			<column name="ACTV_IND" value="Y" />
		</insert>
		<modifySql dbms='mysql'>
			<replace replace="sys_guid" with="uuid" />
		</modifySql>
	</changeSet>

</databaseChangeLog>